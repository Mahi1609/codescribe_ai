# üëã Welcome to f97b129c-aec8-4593-adb4-9d91b20d77eb

üìÑ *This documentation was automatically generated by [CodeScribe AI] (https://github.com/Mahi1609/codescribe_ai.git)*

---

## üß† Overview

This project was auto-documented using CodeScribe AI.

---

## üîç What Does This Project Do?

This project is designed to perform its core functionality as described in the overview.


---

## üõ† Tech Stack Used

- **Detected Environment:** `generic`
- **Languages & Frameworks:**

  - Python

  - Node


---

## üì¶ Dependencies



### Python



### Node



---

## ‚öôÔ∏è Installation

To get started with this project:

```bash
## Clone the repository
git clone <your-repo-url>
cd f97b129c-aec8-4593-adb4-9d91b20d77eb

## Install required packages

#### (Update this based on your environment)



---

## üß© Code File Summaries
### üìÑ `debug_ocr.py`

`debug_ocr.py` is a Python script designed to help debug OCR processes, particularly when working with PDF files. 

**Here's how it works:**

1. **Imports:** It imports the `extract_text_from_pdf` function from the `ocr.ocr_handler` module, which presumably handles PDF text extraction, and the `sys` module for handling command-line arguments.

2. **`debug_ocr` Function:** This function takes a PDF file path as input. It prints a message indicating the PDF being processed, then calls `extract_text_from_pdf` to extract text from the PDF, organized by page.  The function then iterates through each page and its extracted text, printing the page number and the first 1000 characters of the text (truncated with "..." if longer).

3. **Main Execution:** The script checks if a PDF file path is provided as a command-line argument. If no argument is given, it prints a usage message. If an argument is provided, it calls the `debug_ocr` function with the provided path.

**In essence:** This script helps developers visualize the text extracted from a PDF by page, making it easier to identify potential OCR errors or inconsistencies. The limited text display per page is useful for managing output when dealing with large PDFs. 





---

## üß© Code File Summaries
### üìÑ `main.py`

`main.py` automates invoice data extraction from PDF files. 

It leverages Optical Character Recognition (OCR) to extract text from the PDF and then uses the Ollama Large Language Model (LLM) to identify key invoice fields like invoice number, date, and amount. 

The workflow involves:

1. **Taking a PDF file path as input.**
2. **Extracting text from the PDF using `extract_text_from_pdf` from the `ocr.ocr_handler` module.**
3. **Cleaning the extracted text using `clean_ocr_text` from the `utils.text_cleaner` module.**
4. **Analyzing the cleaned text with the Ollama LLM via `generate_invoice_fields` from the `llm.ollama_parser` module to extract invoice data.**
5. **Displaying the extracted invoice fields and saving the structured data and raw LLM output as a JSON file.**

The script utilizes the `os` and `json` modules for file handling and JSON serialization respectively. 






---

## üß© Code File Summaries
### üìÑ `llm/ollama_parser.py`

`ollama_parser.py` is a Python script that extracts structured invoice data from text using an external AI model named "mistral". 

**Key Features:**

- **`generate_invoice_fields(text)` Function:** This function takes invoice text as input and utilizes the "mistral" model to extract invoice fields. 
    - It constructs a prompt tailored to the desired fields and sends a POST request to a local API endpoint (`http://localhost:11434/api/generate`) with the prompt and model name.
    - The function processes the AI's JSON response, returning the extracted invoice data as a Python dictionary if successful, or a default dictionary with error information if parsing fails.

**Dependencies:**

- The script relies on the "mistral" AI model, which is assumed to be accessible via the specified API endpoint.

**Logic:**

1. The script receives invoice text input.
2. It generates a prompt for the "mistral" model to extract specific invoice fields.
3. The prompt is sent to the AI model via a POST request.
4. The model's JSON response is parsed and the extracted invoice data is returned as a Python dictionary.



This script simplifies invoice data extraction by leveraging the capabilities of the "mistral" AI model. 



---

## üß© Code File Summaries
### üìÑ `ocr/ocr_handler.py`

`ocr_handler.py` is a Python script designed for extracting text from scanned PDF documents using Optical Character Recognition (OCR). 

**Key Functionality:**

- **`extract_text_from_pdf(pdf_path)`:** This function takes the path to a PDF file as input. It utilizes the `fitz` (PyMuPDF) library to open the PDF, iterates through each page, and performs the following for each page:
    - Extracts the page content as a high-resolution pixel map (`pix`).
    - Converts the pixel map into a PIL Image object.
    - Applies OCR using `pytesseract` to recognize the text within the image.
    - Stores the extracted text along with its corresponding page number in a dictionary (`extracted_pages`).
- Finally, the function returns the dictionary containing the extracted text for each page.

**Dependencies:**

- `fitz` (PyMuPDF): For PDF manipulation.
- `pytesseract`: For OCR functionality.
- `PIL` (Pillow): For image processing.



In essence, this script automates the process of converting scanned PDF documents into plain text, making the content searchable and editable. 



---

## üß© Code File Summaries
### üìÑ `utils/text_cleaner.py`

## utils/text_cleaner.py: A Python Utility for Preprocessing OCR Text

This file provides a function `clean_ocr_text` designed to clean and normalize text extracted from Optical Character Recognition (OCR) processes. 

**Key Features:**

- **Whitespace and Line Break Cleanup:** Removes extra spaces and line breaks, ensuring consistent formatting.
- **Hyphenation Correction:** Addresses common OCR errors by removing hyphens followed by line breaks.
- **Character Normalization:**  Removes non-ASCII characters and compresses consecutive spaces for cleaner text.
- **OCR Error Replacement:** Implements a set of predefined replacements for frequently occurring OCR mistakes (e.g., "lnvoice" to "Invoice").

**Function:**

- `clean_ocr_text(text)`: Takes a string of raw OCR text as input and returns a cleaned version ready for further processing.

**Purpose:** This utility helps improve the quality and consistency of OCR output, making it more suitable for tasks like data extraction, analysis, and machine learning. 




