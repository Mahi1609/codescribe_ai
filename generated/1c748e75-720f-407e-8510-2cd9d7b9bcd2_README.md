# üëã Welcome to 1c748e75-720f-407e-8510-2cd9d7b9bcd2

üìÑ *This documentation was automatically generated by [CodeScribe AI] (https://github.com/Mahi1609/codescribe_ai.git)*

---

## üß† Overview

This project was auto-documented using CodeScribe AI.

---

## üîç What Does This Project Do?

This project is designed to perform its core functionality as described in the overview.


---

## üõ† Tech Stack Used

- **Detected Environment:** `generic`
- **Languages & Frameworks:**

  - Python

  - Node

  - System


---

## üì¶ Dependencies



### Python

- PIL

- fitz

- llm

- ocr

- pytesseract

- requests



### Node



### System

- Install Ollama from https://ollama.ai (required for running local LLMs).

- Install Tesseract OCR (e.g., `sudo apt-get install tesseract-ocr`).



---

## ‚öôÔ∏è Installation

To get started with this project:

```bash
## Clone the repository
git clone <your-repo-url>
cd 1c748e75-720f-407e-8510-2cd9d7b9bcd2

## Install required packages

#### (Update this based on your environment)



---

## üß© Code File Summaries
### üìÑ `debug_ocr.py`

`debug_ocr.py` is a Python script designed to help debug OCR processes. 

**Functionality:**

- **Imports:** It relies on the `extract_text_from_pdf` function from the `ocr.ocr_handler` module for OCR extraction and uses `sys` to handle command-line arguments.

- **`debug_ocr` Function:** This function takes a PDF file path as input. It prints the processed PDF filename, extracts text from each page using `extract_text_from_pdf`, and then prints the first 1000 characters (or the entire text if shorter) from each page for debugging.

- **Execution:** When run directly, the script checks for a PDF file path as a command-line argument. If provided, it calls the `debug_ocr` function; otherwise, it displays a usage message.

**Purpose:**

This script helps developers:

- **Validate OCR Output:**  Ensure the `extract_text_from_pdf` function accurately extracts text from PDFs.
- **Inspect Text by Page:**  Examine the extracted text for each page individually, identifying potential errors or inconsistencies. 



Essentially, `debug_ocr.py` provides a simple way to visualize and verify the results of an OCR process.



---

## üß© Code File Summaries
### üìÑ `main.py`

This Python script, `main.py`, automates invoice data extraction from PDF files.

**Key Features:**

- **OCR Integration:** Uses an OCR library (`ocr` module) to extract text content from PDF files.
- **Text Preprocessing:** Cleans and normalizes the extracted text using the `utils` module's `clean_ocr_text` function.
- **LLM-Based Field Extraction:**  Leverages an Ollama LLM (`llm` module) to identify and structure key invoice fields from the processed text.
- **Output Handling:** Saves both the raw LLM response and the structured invoice fields as a JSON file in an "output" directory.

**Workflow:**

1. The script takes a PDF file path as input (from command-line arguments).
2. It extracts text from the PDF using OCR.
3. The extracted text is cleaned and preprocessed.
4. An LLM is used to identify and extract structured invoice fields from the processed text.
5. The results are printed to the console and saved as a JSON file.

**Note:** This script relies on external libraries for OCR, LLM interaction, and text processing. 


Let me know if you'd like me to elaborate on any specific part of the code!



---

## üß© Code File Summaries
### üìÑ `llm/ollama_parser.py`

This Python file, `ollama_parser.py`, provides a function to extract structured invoice data from text using an external AI model named "mistral". 

**Key Function:**

- **`generate_invoice_fields(text)`:** This function takes invoice text as input and:
    - Constructs a prompt tailored for the "mistral" model to extract specific invoice fields.
    - Sends a POST request to a local API (`http://localhost:11434/api/generate`) with the prompt and model name.
    - Processes the AI's JSON response, returning the extracted invoice data as a dictionary. If parsing fails, it returns an error message and an empty dictionary.

**Logic:**

The function relies on the `requests` library to interact with the AI model API. It formats the invoice text into a structured prompt and expects the AI's response to be in JSON format containing the extracted invoice fields.  Error handling is included for potential JSON parsing issues.


**In essence, this file simplifies the process of extracting structured invoice data by abstracting away the complexities of interacting with an external AI model.** 



---

## üß© Code File Summaries
### üìÑ `ocr/ocr_handler.py`

## ocr/ocr_handler.py:  PDF Text Extraction with OCR

This Python file implements a function to extract text from scanned PDF documents using Optical Character Recognition (OCR). 

**Key Function:**

* **`extract_text_from_pdf(pdf_path)`:** This function takes the path to a PDF file as input. It utilizes the `fitz` (PyMuPDF) library to open the PDF and iterate through each page. For each page:
    * It extracts a high-resolution pixel map (300 DPI) for improved OCR accuracy.
    * This pixel map is converted into a PIL Image object.
    * The `pytesseract` library performs OCR on the image, extracting the text content.
    * The extracted text is stored in a dictionary (`extracted_pages`) with page numbers as keys.
* Finally, the function closes the PDF document and returns the dictionary containing page-wise extracted text.

**Libraries Used:**

* `fitz` (PyMuPDF): For handling PDF files.
* `pytesseract`: For performing OCR.
* `PIL`: For image processing.


This file provides a straightforward way to extract text from scanned PDFs, leveraging the power of OCR and popular Python libraries. 



---

## üß© Code File Summaries
### üìÑ `utils/text_cleaner.py`

## text_cleaner.py:  Cleaning Up OCR Text

This Python file provides utilities for cleaning up text extracted from Optical Character Recognition (OCR) processes. 

**Key Function:**

- `clean_ocr_text(text)`: This function takes raw OCR text as input and applies a series of transformations to improve its quality.

**Logic:**

The function focuses on addressing common OCR errors and inconsistencies:

1. **Normalization:** It standardizes whitespace by removing extra spaces and line breaks, and replacing multiple spaces/tabs with single spaces.
2. **Hyphenation Correction:** It removes hyphenations at line ends, likely fixing OCR misinterpretations.
3. **Punctuation and Special Character Handling:** It removes non-ASCII characters and further normalizes whitespace.
4. **Common Error Fixes:** It replaces common OCR errors like "lnvoice" with "Invoice" and corrects misreadings of "1" as "I" and "|" as "I".
5. **Final Stripping:** It removes leading and trailing whitespace from the cleaned text.

**Use Case:**

This file is useful for developers working with OCR data, ensuring the extracted text is more readable and suitable for further processing tasks like natural language processing or data analysis. 




