# üëã Welcome to 79922510-6ae8-45a0-96b3-dd3e622fd256

üìÑ *This documentation was automatically generated by [CodeScribe AI](https://github.com/Mahi1609/codescribe_ai.git)*

---

## üß† Overview
### Code File Summaries

The project is a Python-based invoice extraction tool utilizing Optical Character Recognition (OCR) and a local Ollama Large Language Model (LLM). The primary function is to extract relevant invoice fields from a provided PDF file. The process involves several key steps: 
* OCR extraction of text from the PDF using `extract_text_from_pdf` from `ocr_handler.py`
* Text preprocessing with `clean_ocr_text` from `utils/text_cleaner.py`
* Sending the cleaned text to the Ollama model for invoice field generation using `generate_invoice_fields` from `llm/ollama_parser.py`
* Saving the extracted fields to a JSON output file. 
The project relies on standard Python libraries and custom modules for OCR handling, text cleaning, and LLM interaction, with no external dependencies detected.

---

## üîç What Does This Project Do?
This project is designed to ### Code File Summaries

#### PROJECT_PURPOSE
This project is designed to extract invoice fields from PDF files using Optical Character Recognition (OCR) and a local Ollama Large Language Model (LLM).

#### main.py
**Purpose:** Extract invoice fields from a PDF file using OCR and Ollama LLM.
**Key Functions:**
* `main(pdf_path)`: The primary function that orchestrates the extraction process.
* `extract_text_from_pdf(pdf_path)`: Extracts text from a PDF file using OCR (imported from `ocr.ocr_handler`).
* `generate_invoice_fields(cleaned_text)`: Sends the preprocessed text to the Ollama model to extract structured invoice fields (imported from `llm.ollama_parser`).
* `clean_ocr_text(text)`: Preprocesses the extracted text before sending it to the Ollama model (imported from `utils.text_cleaner`).
**Inputs:**
* `pdf_path`: The path to the PDF file to extract invoice fields from.
**Outputs:**
* A JSON file containing the extracted invoice fields and the raw Ollama model response.
**Side-Effects:**
* Creates an `output` directory if it does not exist.
* Saves the extracted invoice fields and raw Ollama model response to a JSON file in the `output` directory.
**Important Dependencies:**
* `ocr.ocr_handler` for OCR text extraction
* `llm.ollama_parser` for Ollama LLM integration
* `utils.text_cleaner` for text preprocessing

Note: The code uses Python as the programming language, but the `PROJECT_PURPOSE` file has an unknown language. The `main.py` file is the primary entry point for the project, and it uses various imported functions to perform the extraction process.

---

## üõ† Tech Stack Used
- **Detected Environment:** `python`
- **Languages & Frameworks:**


  - Python

  - Node

  - System



---

## üì¶ Dependencies


### Python


- PIL

- fitz

- llm

- ocr

- pytesseract

- requests



### Node

- No dependencies detected


### System


- Install Ollama from https://ollama.ai (required for running local LLMs).

- Install Tesseract OCR (e.g., `sudo apt-get install tesseract-ocr`).







---

## ‚öôÔ∏è Installation & Run
To get started with this project:

### Clone the repository
```bash
git clone <your-repo-url>
cd 79922510-6ae8-45a0-96b3-dd3e622fd256
```

### (Optional) Create a virtual environment
```bash
python -m venv venv
source venv/bin/activate   # On Windows: venv\Scripts\activate
```

### Install dependencies

```bash
pip install -r requirements.txt
```


### How to run
```bash
## Clone the repository
git clone <your-repo-url>
cd 79922510-6ae8-45a0-96b3-dd3e622fd256

## Install dependencies
pip install -r requirements.txt

## Run the app
python main.py
```

---

## üß© Code File Summaries

### üìÑ `debug_ocr.py`
### debug_ocr.py

**Purpose:** 
The `debug_ocr.py` script is designed for debugging purposes, utilizing Optical Character Recognition (OCR) to extract and display text from a given PDF file.

**Key Components:**
* The script relies on the `extract_text_from_pdf` function from the `ocr.ocr_handler` module to perform OCR extraction.
* It takes a PDF file path as input, extracts text, and prints the extracted text for each page.

**Behavior and Dependencies:**
* **Inputs:** A PDF file path provided as a command-line argument.
* **Outputs:** Extracted text for each page, printed to the console, truncated to 1000 characters with an ellipsis for longer texts.
* **Side-Effects:** Prints usage instructions if the PDF file path argument is missing. Relies on `extract_text_from_pdf` from `ocr.ocr_handler`, which may have additional side-effects.
* **Dependencies:** 
  + `ocr.ocr_handler` for the `extract_text_from_pdf` function.
  + System dependencies: Tesseract OCR and potentially Ollama for local LLMs, though the latter is not directly used.

**Usage:**
To run, execute `python debug_ocr.py <pdf_path>` from the command line, providing the path to a PDF file as an argument. Ensure Tesseract OCR is installed (e.g., via `sudo apt-get install tesseract-ocr`) and consider Ollama installation from https://ollama.ai for broader project requirements.


### üìÑ `main.py`
### Code File Summaries: main.py

The `main.py` script extracts invoice fields from a given PDF file using Optical Character Recognition (OCR) and a local Ollama Large Language Model (LLM).

**Key Components:**
* Extracts text from PDF files using OCR
* Generates structured invoice fields using a local Ollama model
* Preprocesses extracted text for model input

**Inputs and Outputs:**
* Input: PDF file path (command-line argument)
* Output: JSON file containing extracted invoice fields (saved in the `output` directory)

**Behavior and Dependencies:**
* Utilizes `PIL`, `fitz`, `llm`, `ocr`, `pytesseract`, and `Ollama` to perform OCR and LLM tasks
* Requires `Tesseract OCR` and `Ollama` to be installed separately
* Creates an `output` directory if it does not exist and saves the extracted invoice fields as a JSON file

**Usage:**
To run the script, provide the path to a PDF file as a command-line argument: `python main.py <path_to_pdf>`


### üìÑ `llm/ollama_parser.py`
### Code File Summaries: llm/ollama_parser.py

The `ollama_parser.py` file serves as an interface to parse invoice text and extract relevant information using a local Large Language Model (LLM) API. 

* **Purpose**: Extract structured invoice data via a local LLM API.
* **Key Functions**:
  + `generate_invoice_fields(text)`: Takes invoice text, constructs an LLM API prompt, and returns extracted fields in JSON format.
* **Inputs/Outputs**:
  + Input: `text` (string) - invoice text to parse.
  + Outputs: 
    - `json_data` (dict) - extracted invoice fields.
    - `raw_output` (string) - raw LLM API output or error message.
* **Side-Effects**:
  + Makes a POST request to the local LLM API at `http://localhost:11434/api/generate`.
  + Returns a default dictionary with empty values if the API request fails.
* **Important Dependencies**:
  + `requests` for API requests.
  + Local LLM API (Mistral model) at `http://localhost:11434/api/generate`.
  + `json` for parsing JSON responses.
* **Behavior and Intent**: The `generate_invoice_fields` function extracts structured information from invoice text using a local LLM API, handling potential request or parsing failures by returning a default dictionary.


### üìÑ `ocr/ocr_handler.py`
### ocr_handler.py

The `ocr_handler.py` file provides a function to extract text from scanned PDFs using Optical Character Recognition (OCR).

**Key Features:**
* Extracts text from each page of a scanned PDF
* Returns a dictionary with page numbers as keys and extracted text as values
* Utilizes `fitz` for PDF handling, `pytesseract` for OCR, and `PIL` for image processing

**Important Dependencies:**
* `fitz` (PyMuPDF)
* `pytesseract`
* `PIL` (Python Imaging Library)
* Tesseract OCR (system installation required)

**Behavior and Intent:**
This code splits a scanned PDF into individual pages, applies OCR to each page, and returns the extracted text as a dictionary. A high DPI (300) is used for better OCR accuracy.

**Usage:**
Call the `extract_text_from_pdf()` function with the PDF file path as an argument to extract text from each page. The returned dictionary can be used for further processing or analysis. Note that additional error handling may be necessary to handle exceptions raised by the `pytesseract` or `fitz` libraries.


### üìÑ `utils/text_cleaner.py`
### Code File Summaries: `utils/text_cleaner.py`

The `text_cleaner.py` module cleans and normalizes text extracted from Optical Character Recognition (OCR) processes. 

* **Purpose**: Improve readability and usability of OCR text for further processing.
* **Key Functions**:
  * `clean_ocr_text(text)`: Cleans and normalizes input OCR text.
* **Inputs/Outputs**:
  * Input: `text` (string) - Raw OCR text.
  * Output: `text` (string) - Cleaned and normalized OCR text.
* **Side-Effects**: None.
* **Important Dependencies**: Python's built-in `re` (regular expression) module.
* **Behavior and Intent**: 
  * Removes extra whitespaces and line breaks.
  * Fixes broken words and normalizes punctuation.
  * Replaces common OCR misreads.
  This implementation is extensible, allowing for additional OCR issue fixes as needed.

