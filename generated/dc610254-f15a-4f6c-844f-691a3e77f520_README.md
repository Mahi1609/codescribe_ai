# üëã Welcome to dc610254-f15a-4f6c-844f-691a3e77f520

üìÑ *This documentation was automatically generated by [CodeScribe AI](https://github.com/Mahi1609/codescribe_ai.git)*

---

## üß† Overview
### Code File Summaries

The codebase is designed for invoice extraction from PDF files using Optical Character Recognition (OCR) and a local Ollama Large Language Model (LLM). The main entry point, `main.py`, orchestrates the extraction process by:
* Utilizing `ocr_handler.py` for text extraction from PDFs
* Preprocessing the extracted text with `text_cleaner.py`
* Sending the cleaned text to the Ollama model via `ollama_parser.py` for invoice field generation
* Saving the structured output as a JSON file

Key functions include `extract_text_from_pdf`, `clean_ocr_text`, and `generate_invoice_fields`, which are crucial for the OCR extraction, text preprocessing, and LLM-based invoice field generation, respectively. The code relies on standard Python libraries, such as `os`, `sys`, and `json`, with no external dependencies detected.

---

## üîç What Does This Project Do?
This project is designed to ### Code File Summaries

#### PROJECT_PURPOSE
This project is a Python-based invoice extraction tool utilizing Optical Character Recognition (OCR) and a local Ollama Large Language Model (LLM) to extract structured invoice fields from PDF files.

#### main.py
**Purpose:** Extract invoice fields from PDF files using OCR and a local Ollama LLM.
**Key Functions:**
* `main(pdf_path)`: The primary entry point for the script, responsible for orchestrating the extraction process.
**Inputs:**
* `pdf_path`: The path to the PDF file to extract invoice fields from.
**Outputs:**
* A JSON file containing the extracted invoice fields and the raw LLM response.
**Side-Effects:**
* Creates an `output` directory if it does not exist.
* Saves the extracted invoice fields to a JSON file in the `output` directory.
**Important Dependencies:**
* `ocr_handler.py`: Provides the `extract_text_from_pdf` function for OCR extraction.
* `ollama_parser.py`: Provides the `generate_invoice_fields` function for LLM-based invoice field extraction.
* `text_cleaner.py`: Provides the `clean_ocr_text` function for preprocessing the OCR-extracted text.
**Framework Patterns:**
* Uses a modular approach, with separate modules for OCR handling, LLM parsing, and text cleaning.
* Employs a step-by-step process for invoice extraction, including OCR extraction, text preprocessing, LLM-based field extraction, and output saving. 

Example usage:
* Run the script from the command line, providing the path to the PDF file as an argument: `python main.py <path_to_pdf>`

---

## üõ† Tech Stack Used
- **Detected Environment:** `python`
- **Languages & Frameworks:**


  - Python

  - Node

  - System



---

## üì¶ Dependencies


### Python


- PIL

- fitz

- llm

- ocr

- pytesseract

- requests



### Node

- No dependencies detected


### System


- Install Ollama from https://ollama.ai (required for running local LLMs).

- Install Tesseract OCR (e.g., `sudo apt-get install tesseract-ocr`).







---

## ‚öôÔ∏è Installation & Run
To get started with this project:

### Clone the repository
```bash
git clone <your-repo-url>
cd dc610254-f15a-4f6c-844f-691a3e77f520
```

### (Optional) Create a virtual environment
```bash
python -m venv venv
source venv/bin/activate   # On Windows: venv\Scripts\activate
```

### Install dependencies

```bash
pip install -r requirements.txt
```


### How to run
```bash
## Clone the repository
git clone <your-repo-url>
cd dc610254-f15a-4f6c-844f-691a3e77f520

## Install dependencies
pip install -r requirements.txt

## Run the app
python main.py
```

---

## üß© Code File Summaries

### üìÑ `debug_ocr.py`
**debug_ocr.py**
================

### Purpose

This script debugs Optical Character Recognition (OCR) functionality by extracting text from a given PDF file and printing the extracted text in a readable format.

### Key Functions/Classes

* `debug_ocr(pdf_path)`: Extracts text from a PDF file and prints the extracted text for each page.
* `extract_text_from_pdf(pdf_path)`: Extracts text from a PDF file using the `ocr_handler` module.

### Inputs/Outputs

* **Input**: `pdf_path` (str): The path to the PDF file to be processed.
* **Output**: None (prints the extracted text to the console)

### Side-Effects

* Prints the extracted text to the console, with a maximum of 1000 characters per page.
* Requires the `ollama` LLM and `tesseract-ocr` dependencies to be installed and configured.

### Important Dependencies

* `PIL` (Python Imaging Library)
* `fitz` (PDF library)
* `llm` (Local Language Model)
* `ocr` (Optical Character Recognition)
* `pytesseract` (Tesseract OCR wrapper)
* `requests` (HTTP library)

### Environment Variables

None detected.

### How to Run

To run this script, save it to a file named `debug_ocr.py` and execute it from the command line using Python, passing the path to the PDF file as an argument:
```bash
python debug_ocr.py <pdf_path>
```
Replace `<pdf_path>` with the actual path to the PDF file you want to process.


### üìÑ `main.py`
**Code File Summary: main.py**

### Purpose
The `main.py` file serves as the entry point for extracting invoice fields from a given PDF document using a combination of Optical Character Recognition (OCR) and a Local Language Model (LLM) powered by Ollama.

### Key Functions/Classes
* `main(pdf_path)`: Orchestrates the invoice extraction process.
* `extract_text_from_pdf(pdf_path)`: Performs OCR on the provided PDF file.
* `generate_invoice_fields(cleaned_text)`: Uses the Ollama LLM to extract structured invoice fields from preprocessed text.
* `clean_ocr_text(text)`: Cleans the extracted OCR text.

### Inputs/Outputs
* **Input**: `pdf_path` (path to the PDF file to be processed)
* **Output**: A JSON file containing the extracted invoice fields and raw output from the Ollama model, saved to the `output` directory.

### Side-Effects
* Creates an `output` directory if it does not exist.
* Saves the extracted invoice fields and raw output to a JSON file in the `output` directory.
* Prints progress and debug information to the console.

### Important Dependencies/Framework Patterns
* **Ollama LLM**: Requires Ollama to be installed and configured locally.
* **Tesseract OCR**: Requires Tesseract OCR to be installed and configured on the system.
* **PIL** and **Fitz**: Used for image and PDF processing (not explicitly used in this code snippet).

### How to Run
```bash
python main.py <path_to_pdf>
```
Replace `<path_to_pdf>` with the actual path to the PDF file you want to process.


### üìÑ `llm/ollama_parser.py`
**ollama_parser.py**
====================

**Purpose**
-----------

This module uses a Large Language Model (LLM) to extract structured information from an invoice text. It generates a prompt for the LLM to extract specific fields and returns the results in JSON format.

**Key Functions/Classes**
-------------------------

* `generate_invoice_fields(text)`: Extracts fields from an invoice text using an LLM and returns a dictionary containing the extracted fields and a raw output string.

**Inputs/Outputs**
-----------------

* **Input**: Invoice text as a string.
* **Output**:
	+ `json_data`: A dictionary containing the extracted fields in JSON format.
	+ `raw_output`: A string containing the raw output from the LLM.

**Side-Effects**
----------------

* Sends a POST request to the LLM API at `http://localhost:11434/api/generate`.
* Requires the `ollama` LLM to be installed and running locally.

**Important Dependencies**
-------------------------

* `requests` for making API requests.
* `ollama` LLM for text processing.

**Notes**
--------

* This module assumes that the `ollama` LLM is installed and running locally.
* The `generate_invoice_fields` function returns a default JSON dictionary if the LLM response is invalid or missing.
* The `raw_output` string contains the raw output from the LLM, which can be useful for debugging purposes.


### üìÑ `ocr/ocr_handler.py`



### üìÑ `utils/text_cleaner.py`


